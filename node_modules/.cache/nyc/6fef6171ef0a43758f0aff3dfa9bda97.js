'use strict';var cov_9u07e859c=function(){var path="/home/corneliouzbett/Node-projects/Orders-customers-restful-api/controllers/customer.controller.js",hash="1c5c49af499002fc8ccc871b046277d0d49e0431",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/corneliouzbett/Node-projects/Orders-customers-restful-api/controllers/customer.controller.js",statementMap:{"0":{start:{line:3,column:22},end:{line:3,column:60}},"1":{start:{line:4,column:20},end:{line:4,column:40}},"2":{start:{line:5,column:20},end:{line:5,column:64}},"3":{start:{line:7,column:0},end:{line:13,column:2}},"4":{start:{line:8,column:4},end:{line:12,column:7}},"5":{start:{line:9,column:8},end:{line:9,column:39}},"6":{start:{line:11,column:8},end:{line:11,column:29}},"7":{start:{line:15,column:0},end:{line:28,column:2}},"8":{start:{line:16,column:4},end:{line:27,column:7}},"9":{start:{line:17,column:25},end:{line:17,column:27}},"10":{start:{line:18,column:8},end:{line:21,column:11}},"11":{start:{line:19,column:24},end:{line:19,column:93}},"12":{start:{line:20,column:12},end:{line:20,column:60}},"13":{start:{line:23,column:8},end:{line:23,column:57}},"14":{start:{line:24,column:8},end:{line:24,column:40}},"15":{start:{line:26,column:8},end:{line:26,column:29}},"16":{start:{line:30,column:0},end:{line:37,column:2}},"17":{start:{line:31,column:4},end:{line:31,column:56}},"18":{start:{line:32,column:4},end:{line:36,column:7}},"19":{start:{line:33,column:8},end:{line:33,column:27}},"20":{start:{line:35,column:8},end:{line:35,column:29}},"21":{start:{line:39,column:0},end:{line:49,column:2}},"22":{start:{line:40,column:4},end:{line:48,column:7}},"23":{start:{line:45,column:8},end:{line:45,column:62}},"24":{start:{line:47,column:8},end:{line:47,column:29}},"25":{start:{line:51,column:0},end:{line:60,column:2}},"26":{start:{line:52,column:4},end:{line:59,column:7}},"27":{start:{line:56,column:8},end:{line:56,column:100}},"28":{start:{line:58,column:8},end:{line:58,column:29}},"29":{start:{line:62,column:0},end:{line:68,column:2}},"30":{start:{line:63,column:4},end:{line:67,column:7}},"31":{start:{line:64,column:8},end:{line:64,column:100}},"32":{start:{line:66,column:8},end:{line:66,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:26},end:{line:7,column:27}},loc:{start:{line:7,column:46},end:{line:13,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:8,column:50},end:{line:8,column:51}},loc:{start:{line:8,column:70},end:{line:10,column:5}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:10,column:13},end:{line:10,column:14}},loc:{start:{line:10,column:28},end:{line:12,column:5}},line:10},"3":{name:"(anonymous_3)",decl:{start:{line:15,column:24},end:{line:15,column:25}},loc:{start:{line:15,column:44},end:{line:28,column:1}},line:15},"4":{name:"(anonymous_4)",decl:{start:{line:16,column:46},end:{line:16,column:47}},loc:{start:{line:16,column:67},end:{line:25,column:5}},line:16},"5":{name:"(anonymous_5)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:42},end:{line:21,column:9}},line:18},"6":{name:"(anonymous_6)",decl:{start:{line:25,column:13},end:{line:25,column:14}},loc:{start:{line:25,column:28},end:{line:27,column:5}},line:25},"7":{name:"(anonymous_7)",decl:{start:{line:30,column:26},end:{line:30,column:27}},loc:{start:{line:30,column:46},end:{line:37,column:1}},line:30},"8":{name:"(anonymous_8)",decl:{start:{line:32,column:65},end:{line:32,column:66}},loc:{start:{line:32,column:85},end:{line:34,column:5}},line:32},"9":{name:"(anonymous_9)",decl:{start:{line:34,column:13},end:{line:34,column:14}},loc:{start:{line:34,column:28},end:{line:36,column:5}},line:34},"10":{name:"(anonymous_10)",decl:{start:{line:39,column:17},end:{line:39,column:18}},loc:{start:{line:39,column:37},end:{line:49,column:1}},line:39},"11":{name:"(anonymous_11)",decl:{start:{line:44,column:12},end:{line:44,column:13}},loc:{start:{line:44,column:32},end:{line:46,column:5}},line:44},"12":{name:"(anonymous_12)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:28},end:{line:48,column:5}},line:46},"13":{name:"(anonymous_13)",decl:{start:{line:51,column:17},end:{line:51,column:18}},loc:{start:{line:51,column:37},end:{line:60,column:1}},line:51},"14":{name:"(anonymous_14)",decl:{start:{line:55,column:55},end:{line:55,column:56}},loc:{start:{line:55,column:75},end:{line:57,column:5}},line:55},"15":{name:"(anonymous_15)",decl:{start:{line:57,column:13},end:{line:57,column:14}},loc:{start:{line:57,column:28},end:{line:59,column:5}},line:57},"16":{name:"(anonymous_16)",decl:{start:{line:62,column:18},end:{line:62,column:19}},loc:{start:{line:62,column:38},end:{line:68,column:1}},line:62},"17":{name:"(anonymous_17)",decl:{start:{line:63,column:92},end:{line:63,column:93}},loc:{start:{line:63,column:104},end:{line:65,column:5}},line:63},"18":{name:"(anonymous_18)",decl:{start:{line:65,column:13},end:{line:65,column:14}},loc:{start:{line:65,column:28},end:{line:67,column:5}},line:65}},branchMap:{"0":{loc:{start:{line:19,column:57},end:{line:19,column:93}},type:"binary-expr",locations:[{start:{line:19,column:57},end:{line:19,column:87}},{start:{line:19,column:91},end:{line:19,column:93}}],line:19}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},b:{"0":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var customerService=(cov_9u07e859c.s[0]++,require('../service/customer.service'));var customerModel=(cov_9u07e859c.s[1]++,require('../models'));var OrderItemRepo=(cov_9u07e859c.s[2]++,require('../repository/OrderItemRepository'));cov_9u07e859c.s[3]++;exports.getAllCustomers=function(req,res){cov_9u07e859c.f[0]++;cov_9u07e859c.s[4]++;return customerService.getAllCustomers().then(function(customer){cov_9u07e859c.f[1]++;cov_9u07e859c.s[5]++;res.status(200).send(customer);}).catch(function(err){cov_9u07e859c.f[2]++;cov_9u07e859c.s[6]++;return res.send(err);});};cov_9u07e859c.s[7]++;exports.getAllRecords=function(req,res){cov_9u07e859c.f[3]++;cov_9u07e859c.s[8]++;return OrderItemRepo.getAllRecords().then(function(orderItem){cov_9u07e859c.f[4]++;var orderitems=(cov_9u07e859c.s[9]++,{});cov_9u07e859c.s[10]++;orderItem.forEach(function(item){cov_9u07e859c.f[5]++;var order=(cov_9u07e859c.s[11]++,orderitems[item.customer_name]=(cov_9u07e859c.b[0][0]++,orderitems[item.customer_name])||(cov_9u07e859c.b[0][1]++,{}));cov_9u07e859c.s[12]++;order[item.order_date]=order[item.order_date];});cov_9u07e859c.s[13]++;console.log(JSON.stringify(orderitems,null,4));cov_9u07e859c.s[14]++;res.status(200).send(orderItem);}).catch(function(err){cov_9u07e859c.f[6]++;cov_9u07e859c.s[15]++;return res.send(err);});};cov_9u07e859c.s[16]++;exports.getCustomerById=function(req,res){cov_9u07e859c.f[7]++;cov_9u07e859c.s[17]++;console.log("customerID: ",req.params.customer_id);cov_9u07e859c.s[18]++;customerService.getCustomerById(req.params.customer_id).then(function(customer){cov_9u07e859c.f[8]++;cov_9u07e859c.s[19]++;res.send(customer);}).catch(function(err){cov_9u07e859c.f[9]++;cov_9u07e859c.s[20]++;return res.send(err);});};cov_9u07e859c.s[21]++;exports.create=function(req,res){cov_9u07e859c.f[10]++;cov_9u07e859c.s[22]++;customerModel.Customer.create({id:req.body.id,customer_name:req.body.customer_name,phone_number:req.body.phone_number}).then(function(customer){cov_9u07e859c.f[11]++;cov_9u07e859c.s[23]++;res.status(200).send("customer created successfully");}).catch(function(err){cov_9u07e859c.f[12]++;cov_9u07e859c.s[24]++;return res.send(err);});};cov_9u07e859c.s[25]++;exports.update=function(req,res){cov_9u07e859c.f[13]++;cov_9u07e859c.s[26]++;customerModel.Customer.update({customer_id:req.body.id,customer_name:req.body.customer_name,phone_number:req.body.phone_number},{where:{id:req.params.customer_id}}).then(function(customer){cov_9u07e859c.f[14]++;cov_9u07e859c.s[27]++;res.status(200).send("updated successfully a customer with id = "+req.params.customer_id);}).catch(function(err){cov_9u07e859c.f[15]++;cov_9u07e859c.s[28]++;return res.send(err);});};cov_9u07e859c.s[29]++;exports.destroy=function(req,res){cov_9u07e859c.f[16]++;cov_9u07e859c.s[30]++;customerModel.Customer.destroy({where:{customer_id:req.params.customer_id}}).then(function(){cov_9u07e859c.f[17]++;cov_9u07e859c.s[31]++;res.status(200).send('deleted successfully a customer with id = '+req.params.customer_id);}).catch(function(err){cov_9u07e859c.f[18]++;cov_9u07e859c.s[32]++;return res.send(err);});};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbWVyLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiY3VzdG9tZXJTZXJ2aWNlIiwicmVxdWlyZSIsImN1c3RvbWVyTW9kZWwiLCJPcmRlckl0ZW1SZXBvIiwiZXhwb3J0cyIsImdldEFsbEN1c3RvbWVycyIsInJlcSIsInJlcyIsInRoZW4iLCJzdGF0dXMiLCJzZW5kIiwiY3VzdG9tZXIiLCJjYXRjaCIsImVyciIsImdldEFsbFJlY29yZHMiLCJvcmRlcml0ZW1zIiwib3JkZXJJdGVtIiwiZm9yRWFjaCIsIml0ZW0iLCJvcmRlciIsImN1c3RvbWVyX25hbWUiLCJvcmRlcl9kYXRlIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRDdXN0b21lckJ5SWQiLCJwYXJhbXMiLCJjdXN0b21lcl9pZCIsImNyZWF0ZSIsIkN1c3RvbWVyIiwiaWQiLCJib2R5IiwicGhvbmVfbnVtYmVyIiwidXBkYXRlIiwid2hlcmUiLCJkZXN0cm95Il0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLGtCQUFrQkMsUUFBUSw2QkFBUixDQUF4QjtBQUNBLElBQU1DLGdCQUFnQkQsUUFBUSxXQUFSLENBQXRCO0FBQ0EsSUFBTUUsZ0JBQWdCRixRQUFRLG1DQUFSLENBQXRCOztBQUVBRyxRQUFRQyxlQUFSLEdBQTBCLFVBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFjO0FBQ3BDLFdBQU9QLGdCQUFnQkssZUFBaEIsR0FDRkcsSUFERSxDQUNHLG9CQUFZO0FBQ2RELFlBQUlFLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQkMsUUFBckI7QUFDSCxLQUhFLEVBSUZDLEtBSkUsQ0FJSSxVQUFDQyxHQUFEO0FBQUEsZUFBU04sSUFBSUcsSUFBSixDQUFTRyxHQUFULENBQVQ7QUFBQSxLQUpKLENBQVA7QUFLSCxDQU5EOztBQVFBVCxRQUFRVSxhQUFSLEdBQXdCLFVBQUNSLEdBQUQsRUFBTUMsR0FBTixFQUFjO0FBQ2xDLFdBQU9KLGNBQWNXLGFBQWQs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R0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsK0NBQStDSixJQUFJcUIsTUFBSixDQUFXQyxXQUEvRTtBQUNILEtBSEwsRUFJS2hCLEtBSkwsQ0FJVyxVQUFDQyxHQUFEO0FBQUEsZUFBU04sSUFBSUcsSUFBSixDQUFTRyxHQUFULENBQVQ7QUFBQSxLQUpYO0FBS0gsQ0FORCIsImZpbGUiOiJjdXN0b21lci5jb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL2Nvcm5lbGlvdXpiZXR0L05vZGUtcHJvamVjdHMvT3JkZXJzLWN1c3RvbWVycy1yZXN0ZnVsLWFwaS9jb250cm9sbGVycyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGN1c3RvbWVyU2VydmljZSA9IHJlcXVpcmUoJy4uL3NlcnZpY2UvY3VzdG9tZXIuc2VydmljZScpO1xyXG5jb25zdCBjdXN0b21lck1vZGVsID0gcmVxdWlyZSgnLi4vbW9kZWxzJyk7XHJcbmNvbnN0IE9yZGVySXRlbVJlcG8gPSByZXF1aXJlKCcuLi9yZXBvc2l0b3J5L09yZGVySXRlbVJlcG9zaXRvcnknKTtcclxuXHJcbmV4cG9ydHMuZ2V0QWxsQ3VzdG9tZXJzID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICByZXR1cm4gY3VzdG9tZXJTZXJ2aWNlLmdldEFsbEN1c3RvbWVycygpXHJcbiAgICAgICAgLnRoZW4oY3VzdG9tZXIgPT4ge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChjdXN0b21lcilcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiByZXMuc2VuZChlcnIpKTtcclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0QWxsUmVjb3JkcyA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgcmV0dXJuIE9yZGVySXRlbVJlcG8uZ2V0QWxsUmVjb3JkcygpXHJcbiAgICAgICAgLnRoZW4ob3JkZXJJdGVtID0+IHtcclxuICAgICAgICAgICAgbGV0IG9yZGVyaXRlbXMgPSB7fTtcclxuICAgICAgICAgICAgb3JkZXJJdGVtLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGxldCBvcmRlciA9IG9yZGVyaXRlbXNbaXRlbS5jdXN0b21lcl9uYW1lXSA9IG9yZGVyaXRlbXNbaXRlbS5jdXN0b21lcl9uYW1lXSAgfHwge307XHJcbiAgICAgICAgICAgICAgICBvcmRlcltpdGVtLm9yZGVyX2RhdGVdID1vcmRlcltpdGVtLm9yZGVyX2RhdGVdO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KG9yZGVyaXRlbXMsIG51bGwsIDQpKTtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQob3JkZXJJdGVtKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHJlcy5zZW5kKGVycikpO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRDdXN0b21lckJ5SWQgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKFwiY3VzdG9tZXJJRDogXCIsIHJlcS5wYXJhbXMuY3VzdG9tZXJfaWQpO1xyXG4gICAgY3VzdG9tZXJTZXJ2aWNlLmdldEN1c3RvbWVyQnlJZChyZXEucGFyYW1zLmN1c3RvbWVyX2lkKVxyXG4gICAgICAgIC50aGVuKGN1c3RvbWVyID0+IHtcclxuICAgICAgICAgICAgcmVzLnNlbmQoY3VzdG9tZXIpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHJlcy5zZW5kKGVycikpO1xyXG59O1xyXG5cclxuZXhwb3J0cy5jcmVhdGUgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGN1c3RvbWVyTW9kZWwuQ3VzdG9tZXIuY3JlYXRlKHtcclxuICAgICAgICBpZDogcmVxLmJvZHkuaWQsXHJcbiAgICAgICAgY3VzdG9tZXJfbmFtZTogcmVxLmJvZHkuY3VzdG9tZXJfbmFtZSxcclxuICAgICAgICBwaG9uZV9udW1iZXI6IHJlcS5ib2R5LnBob25lX251bWJlclxyXG4gICAgfSlcclxuICAgICAgICAudGhlbihjdXN0b21lciA9PiB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKFwiY3VzdG9tZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIilcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiByZXMuc2VuZChlcnIpKTtcclxufTtcclxuXHJcbmV4cG9ydHMudXBkYXRlID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjdXN0b21lck1vZGVsLkN1c3RvbWVyLnVwZGF0ZSh7XHJcbiAgICAgICAgY3VzdG9tZXJfaWQ6IHJlcS5ib2R5LmlkLCBjdXN0b21lcl9uYW1lOiByZXEuYm9keS5jdXN0b21lcl9uYW1lLFxyXG4gICAgICAgIHBob25lX251bWJlcjogcmVxLmJvZHkucGhvbmVfbnVtYmVyXHJcbiAgICB9LCB7IHdoZXJlOiB7IGlkOiByZXEucGFyYW1zLmN1c3RvbWVyX2lkIH0gfSlcclxuICAgICAgICAudGhlbigoY3VzdG9tZXIpID0+IHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoXCJ1cGRhdGVkIHN1Y2Nlc3NmdWxseSBhIGN1c3RvbWVyIHdpdGggaWQgPSBcIiArIHJlcS5wYXJhbXMuY3VzdG9tZXJfaWQpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHJlcy5zZW5kKGVycikpO1xyXG59O1xyXG5cclxuZXhwb3J0cy5kZXN0cm95ID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjdXN0b21lck1vZGVsLkN1c3RvbWVyLmRlc3Ryb3koeyB3aGVyZTogeyBjdXN0b21lcl9pZDogcmVxLnBhcmFtcy5jdXN0b21lcl9pZCB9IH0pXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCgnZGVsZXRlZCBzdWNjZXNzZnVsbHkgYSBjdXN0b21lciB3aXRoIGlkID0gJyArIHJlcS5wYXJhbXMuY3VzdG9tZXJfaWQpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gcmVzLnNlbmQoZXJyKSk7XHJcbn07Il19